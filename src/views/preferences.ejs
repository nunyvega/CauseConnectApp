<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CauseConnect - Preferences</title>
    <link rel="icon" href="icon.png">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/preferences.css">
</head>
<%- include('partials/header') %>

<% if (successMessage && successMessage.length > 0) { %>
  <div class="success-message">
    <%= successMessage %>
  </div>
<% } %>

<form action="/user/preferences" method="post" enctype="multipart/form-data">
  <!-- Display current profile picture -->
  <!-- Current Profile Picture -->
  <div>
    <label>Current Profile Picture:</label>
    <% if (preferences.profilePicture && preferences.profilePicture !== 'null') { %>
      <img src="<%= preferences.profilePicture %>" alt="Current Profile Picture" width="150">
    <% } else { %>
      <p>No profile picture uploaded.</p>
    <% } %>
  </div>

  
  <!-- Add profile picture upload field -->
  <label for="profilePicture">Profile Picture:</label>
  <input type="file" name="profilePicture" id="profilePicture">

  <label for="name">Name:</label>
  <input type="text" name="name" value="<%= preferences.name || '' %>" required>

  <label for="age">Age:</label>
  <input type="number" name="age" value="<%= preferences.age || '' %>">

  <label for="skills">Skills:</label>
  <input type="text" name="skills" value="<%= preferences.skills ? preferences.skills.join(', ') : '' %>">

  <label for="interests">Interests:</label>
  <input type="text" name="interests" value="<%= preferences.interests ? preferences.interests.join(', ') : '' %>">

  <label for="role">Role:</label>
  <input type="text" name="role" value="<%= preferences.role || '' %>">

  <label for="favoriteBook">Favorite Book:</label>
  <input type="text" name="favoriteBook" value="<%= preferences.favoriteBook || '' %>">

  <label for="interests">Select Interests:</label>
  <input type="checkbox" name="interests" value="Photography"> Photography
  <input type="checkbox" name="interests" value="Traveling"> Traveling
      <!-- TODO: add other values -->
  <label for="preferredGreeting">Preferred Greeting:</label>
  <select name="preferredGreeting">
    <option value="hug" <%= preferences.preferredGreeting === 'hug' ? 'selected' : '' %>>Hug</option>
    <option value="handshake" <%= preferences.preferredGreeting === 'handshake' ? 'selected' : '' %>>Handshake</option>
    <option value="high five" <%= preferences.preferredGreeting === 'high five' ? 'selected' : '' %>>High Five</option>
    <option value="fist bump" <%= preferences.preferredGreeting === 'fist bump' ? 'selected' : '' %>>Fist Bump</option>
    <option value="wave" <%= preferences.preferredGreeting === 'wave' ? 'selected' : '' %>>Wave</option>
  </select>
  <button type="submit" class="button cta-button">Update Profile & Preferences</button>
</form>