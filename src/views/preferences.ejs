<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CauseConnect - Preferences</title>
  <link rel="icon" href="icon.png">
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="stylesheet" href="/css/preferences.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
  <%- include('partials/header') %>

  <% if (successMessage && successMessage.length> 0) { %>
  <div class="success-message">
    <%= successMessage %>
  </div>
  <% } %>

  <form action="/user/preferences" method="post" enctype="multipart/form-data">
    <div>
      <!-- Add profile picture upload field -->
      <fieldset>
        <legend>Profile Picture:</legend>
        <% if (preferences.profilePicture && preferences.profilePicture !=='null' ) { %>
        <img src="<%= preferences.profilePicture %>" alt="Current Profile Picture" width="150" id="profile-image">
        <% } else { %>
        <p>No profile picture uploaded.</p>
        <% } %>
        <input type="file" name="profilePicture" id="profilePicture" accept="image/*">
      </fieldset>

      <fieldset>
        <legend>Name:</legend>
        <input type="text" name="name" value="<%= preferences.name || '' %>" required>
      </fieldset>

      <fieldset>
        <legend>Age:</legend>
        <input id="age" type="number" name="age" value="<%= preferences.age || '' %>">
      </fieldset>

      <fieldset>
        <legend>Location:</legend>
        <input type="text" name="location" value="<%= preferences.location || '' %>">
      </fieldset>

      <fieldset>
        <legend>Personal Bio:</legend>
        <textarea id="personalBio" type="text" name="personalBio">
          <%= preferences.personalBio || '' %>
        </textarea>
      </fieldset>

      <!-- Allow user to set email and phone number -->
      <fieldset> 
        <legend>Contact Methods:</legend>
        <label for="email">Email</label>
        <input type="text" name="contactMethods.email" value="<%= preferences.contactMethods.email || '' %>">
        <label for="phone">Phone</label>
        <input type="text" name="contactMethods.phone" value="<%= preferences.contactMethods.phone || '' %>">        
      </fieldset>
      <!-- Skills -->
      <fieldset>
        <legend>Skills:</legend>
        <% skillOptions.forEach(skill => { %>
        <div class="checkbox-group">
          <input type="checkbox" name="skills" value="<%= skill %>" <% if(preferences.skills && preferences.skills.includes(skill)) { %>checked<% } %>>
          <label><%= skill %></label><br>
        </div>

        <% }); %>
      </fieldset>


      <!-- For Interests -->
      <fieldset>
        <legend>Interests:</legend>
        <% interestOptions.forEach(interest => { %>
        <div class="checkbox-group">
          <input type="checkbox" name="interests" value="<%= interest %>" <% if(preferences.interests && preferences.interests.includes(interest)) { %>checked<% } %>>
          <label><%= interest %></label><br>
        </div>
        <% }); %>
      </fieldset>

      <!-- For Roles -->
      <fieldset>
        <legend>Roles:</legend>
        <% roleOptions.forEach(role => { %>
        <div class="checkbox-group">
          <input type="checkbox" name="role" value="<%= role %>" <% if(preferences.role && preferences.role.includes(role)) { %>checked<% } %>>
          <label><%= role %></label><br>
        </div>
        <% }); %>
      </fieldset>

      <!-- For Languages Spoken -->
      <fieldset>
        <legend>Languages Spoken:</legend>
        <% languageOptions.forEach(language => { %>
        <div class="checkbox-group">
          <input type="checkbox" name="languagesSpoken" value="<%= language %>" <% if(preferences.languagesSpoken && preferences.languagesSpoken.includes(language)) { %>checked<% } %>>
          <label><%= language %></label><br>
        </div>
        <% }); %>
      </fieldset>

      <fieldset>
        <legend>Favorite Book:</legend>
        <input type="text" name="favoriteBook" value="<%= preferences.favoriteBook || '' %>">
      </fieldset>
      <fieldset>

        <legend>Prefered Greeting:</legend>
        <% greetingOptions.forEach(preferredGreeting => { %>
        <div class="checkbox-group">
          <input type="checkbox" name="preferredGreeting" value="<%= preferredGreeting %>" <% if(preferences.preferredGreeting && preferences.preferredGreeting.includes(preferredGreeting)) { %>checked<% } %>>
          <label><%= preferredGreeting %></label><br>
        </div>
        <% }); %>
      </fieldset>

      <!-- Allow user to set their facebook, twitter, instagram, linkedin, youtube and website -->
      <fieldset>
        <legend>Social Media:</legend>
    
        <label for="facebook"><i class="fab fa-facebook-f"></i> Facebook</label>
        <input type="text" name="socialMedia.facebook" value="<%= preferences.socialMedia.facebook || '' %>">
    
        <label for="twitter"><i class="fab fa-twitter"></i> Twitter</label>
        <input type="text" name="socialMedia.twitter" value="<%= preferences.socialMedia.twitter || '' %>">
    
        <label for="instagram"><i class="fab fa-instagram"></i> Instagram</label>
        <input type="text" name="socialMedia.instagram" value="<%= preferences.socialMedia.instagram || '' %>">
    
        <label for="linkedin"><i class="fab fa-linkedin-in"></i> LinkedIn</label>
        <input type="text" name="socialMedia.linkedin" value="<%= preferences.socialMedia.linkedin || '' %>">
    
        <label for="youtube"><i class="fab fa-youtube"></i> YouTube</label>
        <input type="text" name="socialMedia.youtube" value="<%= preferences.socialMedia.youtube || '' %>">
    
        <label for="website"><i class="fas fa-globe"></i> Website</label>
        <input type="text" name="socialMedia.website" value="<%= preferences.socialMedia.website || '' %>">
    </fieldset>
    

      <button type="submit" class="button cta-button">Update Profile & Preferences</button>
  </form>
</body>